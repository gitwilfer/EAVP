# ğŸ§° Makefile para Proyecto Go â€“ MÃ³dulos Ejemplo con Passkeys
# Este Makefile define comandos estÃ¡ndar para trabajar con los mÃ³dulos ejemplo.

APP_NAME=eav-api
PKG_PATH=./...

.PHONY: all test lint format run doc exampleuser examplelogin clean

all: lint test

## ğŸ” Ejecuta linter completo con golangci-lint
lint:
	@echo "Ejecutando linter..."
	@golangci-lint run

## ğŸ¯ Ejecuta pruebas de todos los paquetes
test:
	@echo "Ejecutando pruebas..."
	@go test $(PKG_PATH) -v -cover

## ğŸ§¹ Formatea imports y cÃ³digo
format:
	@echo "Formateando cÃ³digo..."
	@goimports -w .

## ğŸš€ Ejecuta el servicio principal (cmd/eav-api/main.go)
run:
	@echo "Iniciando $(APP_NAME)..."
	@go run ./cmd/$(APP_NAME)/main.go

## ğŸ“š Genera documentaciÃ³n con godoc (requiere instalaciÃ³n local)
doc:
	@echo "Sirviendo documentaciÃ³n en http://localhost:6060"
	@godoc -http=:6060

## ğŸ§ª Ejecuta pruebas del mÃ³dulo exampleuser
exampleuser:
	@go test ./internal/exampleuser/... -v

## ğŸ§ª Ejecuta pruebas del mÃ³dulo examplelogin
examplelogin:
	@go test ./internal/examplelogin/... -v

## ğŸ§¹ Limpieza general (borrar binarios, cache, etc.)
clean:
	@echo "Limpiando artefactos temporales..."
	@go clean
	@rm -rf dist/
